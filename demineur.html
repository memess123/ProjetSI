<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DÃ©mineur Moderne</title>
    <style>
        :root {
            --bg-color: #0f172a;
            --card-bg: rgba(255, 255, 255, 0.1);
            --cell-bg: rgba(255, 255, 255, 0.05);
            --cell-hover: rgba(255, 255, 255, 0.2);
            --primary: #38bdf8;
            --danger: #ef4444;
            --text: #f8fafc;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--bg-color);
            background-image: radial-gradient(circle at top right, #1e293b, #0f172a);
            color: var(--text);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            margin: 0;
        }

        .container {
            background: var(--card-bg);
            backdrop-filter: blur(10px);
            padding: 2rem;
            border-radius: 20px;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
            border: 1px solid rgba(255, 255, 255, 0.1);
            text-align: center;
        }

        h1 { margin-top: 0; font-weight: 300; letter-spacing: 2px; }

        .stats {
            display: flex;
            justify-content: space-around;
            margin-bottom: 1.5rem;
            font-size: 1.2rem;
            font-weight: bold;
        }

        #grid {
            display: grid;
            grid-template-columns: repeat(10, 35px);
            grid-template-rows: repeat(10, 35px);
            gap: 4px;
            border: 2px solid rgba(255, 255, 255, 0.1);
            padding: 5px;
            border-radius: 8px;
            background: rgba(0, 0, 0, 0.2);
        }

        .cell {
            width: 35px;
            height: 35px;
            background: var(--cell-bg);
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.2s;
            user-select: none;
        }

        .cell:hover { background: var(--cell-hover); transform: scale(1.05); }

        .cell.revealed {
            background: rgba(255, 255, 255, 0.15);
            cursor: default;
        }

        .cell.mine { background: var(--danger); }
        .cell.flag { color: #fbbf24; }

        /* Couleurs des chiffres */
        .n-1 { color: #38bdf8; } .n-2 { color: #4ade80; }
        .n-3 { color: #f87171; } .n-4 { color: #818cf8; }

        button {
            margin-top: 1.5rem;
            padding: 0.8rem 1.5rem;
            border: none;
            border-radius: 10px;
            background: var(--primary);
            color: white;
            font-weight: bold;
            cursor: pointer;
            transition: opacity 0.2s;
        }

        button:hover { opacity: 0.9; }
    </style>
</head>
<body>

    <div class="container">
        <h1>DÃ‰MINEUR</h1>
        <div class="stats">
            <div>ðŸ’£ <span id="mine-count">10</span></div>
            <div id="status">ðŸ˜Š</div>
        </div>
        <div id="grid"></div>
        <button onclick="initGame()">Nouvelle Partie</button>
    </div>

    <script>
        const size = 10;
        const mineCount = 10;
        let grid = [];
        let revealedCount = 0;
        let gameOver = false;

        const gridElement = document.getElementById('grid');
        const statusEmoji = document.getElementById('status');

        function initGame() {
            gridElement.innerHTML = '';
            grid = [];
            revealedCount = 0;
            gameOver = false;
            statusEmoji.textContent = 'ðŸ˜Š';
            document.getElementById('mine-count').textContent = mineCount;

            // CrÃ©er la structure de donnÃ©es
            for (let r = 0; r < size; r++) {
                grid[r] = [];
                for (let c = 0; c < size; c++) {
                    const cell = {
                        r, c,
                        mine: false,
                        revealed: false,
                        flagged: false,
                        neighborMines: 0,
                        element: document.createElement('div')
                    };
                    cell.element.classList.add('cell');
                    cell.element.addEventListener('click', () => clickCell(cell));
                    cell.element.addEventListener('contextmenu', (e) => {
                        e.preventDefault();
                        toggleFlag(cell);
                    });
                    gridElement.appendChild(cell.element);
                    grid[r][c] = cell;
                }
            }

            // Placer les mines
            let placedMines = 0;
            while (placedMines < mineCount) {
                let r = Math.floor(Math.random() * size);
                let c = Math.floor(Math.random() * size);
                if (!grid[r][c].mine) {
                    grid[r][c].mine = true;
                    placedMines++;
                }
            }

            // Calculer les voisins
            for (let r = 0; r < size; r++) {
                for (let c = 0; c < size; c++) {
                    if (!grid[r][c].mine) {
                        grid[r][c].neighborMines = countMines(r, c);
                    }
                }
            }
        }

        function countMines(r, c) {
            let count = 0;
            for (let i = -1; i <= 1; i++) {
                for (let j = -1; j <= 1; j++) {
                    if (grid[r+i] && grid[r+i][c+j] && grid[r+i][c+j].mine) count++;
                }
            }
            return count;
        }

        function clickCell(cell) {
            if (gameOver || cell.revealed || cell.flagged) return;

            if (cell.mine) {
                endGame(false);
                return;
            }

            reveal(cell);

            if (revealedCount === size * size - mineCount) {
                endGame(true);
            }
        }

        function reveal(cell) {
            if (cell.revealed || cell.flagged) return;
            
            cell.revealed = true;
            cell.element.classList.add('revealed');
            revealedCount++;

            if (cell.neighborMines > 0) {
                cell.element.textContent = cell.neighborMines;
                cell.element.classList.add('n-' + cell.neighborMines);
            } else {
                // Propagation si case vide
                for (let i = -1; i <= 1; i++) {
                    for (let j = -1; j <= 1; j++) {
                        if (grid[cell.r+i] && grid[cell.r+i][cell.c+j]) {
                            reveal(grid[cell.r+i][cell.c+j]);
                        }
                    }
                }
            }
        }

        function toggleFlag(cell) {
            if (gameOver || cell.revealed) return;
            cell.flagged = !cell.flagged;
            cell.element.classList.toggle('flag');
            cell.element.textContent = cell.flagged ? 'ðŸš©' : '';
        }

        function endGame(isWin) {
            gameOver = true;
            statusEmoji.textContent = isWin ? 'ðŸ˜Ž' : 'ðŸ˜µ';
            grid.flat().forEach(cell => {
                if (cell.mine) {
                    cell.element.classList.add('mine');
                    cell.element.textContent = 'ðŸ’£';
                }
            });
            if (isWin) alert('FÃ©licitations ! Vous avez gagnÃ© !');
        }

        initGame();
    </script>
</body>
</html>
